<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/workflow.css">
	<title>Workflow</title>
</head>

<body onload="init();">
	
<!-- 	<input type="button" value="生成执行序列" onclick="onSeralize()">
	<input type="text" id="workflow" size="60">
	<br>
	<input type="button" value="Drag" onclick="onDrag()">
	<input type="button" value="Connect" onclick="onConnect()">
	<input type="button" value="Test" onclick="onTest()">
	<input type="text" id="xy" size="30">
	<br>
	<input type="text" id="xy" size="30"> -->
	<div id="header">
		<div class="title">工作流系统</div>
		<div class="toolbar">
			<ul>
				<li id="adddata">添加(数据)</li>
				<li id="addfunc">添加(算法)</li>
				<li id="add">添加</li>
				<li id="sel">选择</li>
				<li id="conn">连接</li>
				<li id="save">保存</li>				
				<li id="load">加载</li>
				<li id="run">运行</li>
			</ul>
		</div>
	</div>

	<div id="center">
		<div id="funcs">
			<div class="titlebar">算法库</div>
			<div id="func_container" class="func_container">
<!-- 				<div class="func">Stretch</div>
				<div class="func">Fusion</div> -->
				
			</div>
		</div>
		<div id="main">
			<div id="canvas"></div>
			<div id="result_panel">
				<div class="titlebar">输出</div>
				<div id="result">输出结果</div>
			</div>
		</div>
	</div>
	<br>
	
	
</body>
</html>


<script type="text/javascript" src="../lib/raphael.js"></script>
<script type="text/javascript" src="../lib/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="lib/def.js"></script>
<script type="text/javascript" src="lib/Arrow.js"></script>
<script type="text/javascript" src="lib/Edge.js"></script>
<script type="text/javascript" src="lib/EdgeManager.js"></script>
<script type="text/javascript" src="lib/Node.js"></script>
<script type="text/javascript" src="lib/Shape.js"></script>
<script type="text/javascript" src="lib/shape/Ellipse.js"></script>
<script type="text/javascript" src="lib/shape/Rect.js"></script>

<script type="text/javascript" src="lib/Node/DataNode.js"></script>
<script type="text/javascript" src="lib/Node/FuncNode.js"></script>
<script type="text/javascript" src="lib/Node/Func/Fusion.js"></script>
<script type="text/javascript" src="lib/Node/Func/Stretch.js"></script>
<script type="text/javascript" src="lib/NodeManager.js"></script>

<script type="text/javascript" src="lib/Graph.js"></script>

<script type="text/javascript" src="js/workflow.js"></script>

<script type="text/javascript">
	var input, output, func;
	//绘制链接线的状态
	var STATE = {
		DRAW : "draw",
		CONNECT : "connect",
		NONE : "none"
	}
	var CONNECT_STATE = {		
		READY : "ready",
		CONNECTING : "connecting",
		NONE : "none"	
	}
	var g_state = STATE.CONNECT;
	var g_connect_state = CONNECT_STATE.NONE;

	//创建Raphael对象
	//var R = Raphael("canvas", $("#canvas").width(), $("#canvas").height());
	var g_graph = new Graph("canvas");
	//initGraph();

	

	function onSeralize(){
		g_graph.serialize();
		document.getElementById("workflow").value = g_graph.getWorkflowText();
	}

	function onDrag(){		
		g_graph.draggable();
	}

	function onConnect(){
		g_graph.undrag();
	}

	function onTest(){
		//var dd = new L.Class1();
		//dd.echo();
		// var data = new Data(R);
		// data.getType();
		// data.echo();
		
		// var v=null;
		// if(v){
		// 	alert("1");
		// }
		// else{
		// 	alert("2");
		// }
		// 
		
		var arr = [];
		for(var i=0; i<10; i++){
			arr.push(i);
		}
		while(arr.length>0){
			console.log(arr.pop());
		}
	}

	function init(){
		$("#canvas").on("mousemove", onMouseMove);
	}

	function onMouseMove(evt){
		//document.getElementById("xy").value = evt.offsetX + "," + evt.offsetY;
	}

</script>

<!-- <script type="text/javascript" src="input.js"></script>
<script type="text/javascript" src="func.js"></script> -->